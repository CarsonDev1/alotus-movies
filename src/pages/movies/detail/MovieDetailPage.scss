@use '../../../styles/mixins' as *;
@use '../../../styles/animations' as *;

.movie-detail {
	position: relative;
	background: linear-gradient(to bottom, #0a0e27 0%, #1a1f3a 100%);
	color: #fff;

	.backdrop {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		height: 100%;
		background-size: cover;
		background-position: center top;
		background-repeat: no-repeat;
		z-index: 0;

		.backdrop-overlay {
			position: absolute;
			inset: 0;
			background: linear-gradient(
				to bottom,
				rgba(10, 14, 39, 0.3) 0%,
				rgba(10, 14, 39, 0.7) 0%,
				rgba(10, 14, 39, 0.95) 80%,
				rgba(10, 14, 39, 1) 100%
			);
		}
	}

	.movie-detail-container {
		position: relative;
		z-index: 1;
		display: flex;
		flex-wrap: wrap;
		gap: 40px;
	}

	.additional-info {
		position: relative;
		z-index: 2;

		.trailer {
			margin-top: 20px;

			.trailer-player {
				position: relative;
				width: 100%;
				padding-top: 56.25%;
				border-radius: 16px;
				overflow: hidden;
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);

				iframe {
					position: absolute;
					inset: 0;
					width: 100%;
					height: 100%;
					border: none;
				}

				.thumbnail {
					position: absolute;
					inset: 0;
					width: 100%;
					height: 100%;
					cursor: pointer;
					overflow: hidden;
					@include smooth-transition(transform opacity, 0.45s);
					display: flex;
					justify-content: center;
					align-items: center;
					z-index: 2;

					img {
						width: 100%;
						height: 100%;
						object-fit: cover;
						@include smooth-transition(transform, 0.45s);
					}

					&:hover img {
						transform: scale(1.05);
					}

					.play-btn {
						@include absolute-center;
						width: 80px;
						height: 80px;
						border-radius: 50%;
						@include glass-effect(5px, 0.25);
						display: flex;
						align-items: center;
						justify-content: center;
						font-size: 2.5rem;
						color: white;
						@include smooth-transition;
					}

					&:hover .play-btn {
						transform: scale(1.15);
					}

					&.hide {
						transform: translateY(-100%);
						opacity: 0;
						pointer-events: none;
					}
				}
			}
		}

		.directors,
		.cast {
			margin-top: 40px;

			h3 {
				font-size: 1.4rem;
				font-weight: 700;
				margin-bottom: 14px;
				opacity: 0.95;
			}

			.people-grid {
				display: flex;
				gap: 18px;
				overflow-x: auto;
				padding-bottom: 6px;
				scroll-snap-type: x mandatory;

				&::-webkit-scrollbar {
					height: 6px;
				}
				&::-webkit-scrollbar-thumb {
					background: rgba(255, 255, 255, 0.15);
					border-radius: 4px;
				}
			}

			.person {
				flex: 0 0 150px;
				border-radius: 12px;
				overflow: hidden;
				scroll-snap-align: start;
				cursor: pointer;
				@include glass-effect(6px, 0.05);
				@include smooth-transition(all, 0.35s);

				img {
					@include smooth-transition(all, 0.35s);
				}

				&:hover img {
					@include card-hover(1.03, -5px);
					box-shadow: 0 12px 30px rgba(0, 0, 0, 0.35);
				}

				.person-image {
					position: relative;
					width: 100%;
					padding-top: 140%;
					overflow: hidden;

					img,
					.no-image {
						position: absolute;
						inset: 0;
						width: 100%;
						height: 100%;
						object-fit: cover;
					}

					.no-image {
						display: flex;
						align-items: center;
						justify-content: center;
						@include glass-effect(6px, 0.05);
					}
				}

				.name,
				.person-name {
					padding: 10px 8px 2px;
					font-size: 0.9rem;
					font-weight: 600;
					color: #fff;
					text-align: center;
					@include text-ellipsis(1);
				}

				.character {
					padding: 0 8px 10px;
					font-size: 0.8rem;
					color: #aeb4c4;
					text-align: center;
					@include text-ellipsis(1);
				}
			}
		}
	}

	.poster {
		flex: 0 0 350px;
		animation: fadeInUp 0.6s ease;

		img {
			width: 100%;
			border-radius: 16px;
			box-shadow: 0 10px 50px rgba(0, 0, 0, 0.6);
			@include smooth-transition;

			&:hover {
				transform: scale(1.02);
			}
		}
	}

	.info {
		flex: 1;
		min-width: 300px;
		display: flex;
		flex-direction: column;
		gap: 20px;
		animation: fadeInUp 0.6s ease 0.2s both;

		.title {
			font-size: 3rem;
			font-weight: 800;
			line-height: 1.1;
			margin: 0;
			text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.8);
		}

		.tagline {
			font-size: 1.2rem;
			font-style: italic;
			color: #d1d5db;
			opacity: 0.9;
			margin: 0;
		}

		.meta {
			display: flex;
			align-items: center;
			gap: 16px;
			flex-wrap: wrap;
			font-size: 1rem;

			span {
				display: flex;
				align-items: center;
				gap: 6px;
				padding: 8px 16px;
				@include glass-effect(10px, 0.1);
				border-radius: 8px;
				font-weight: 600;
			}

			.rating {
				background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
				color: #000;

				.star {
					font-size: 1.1rem;
				}
			}

			.year,
			.runtime {
				color: #d1d5db;
			}
		}

		.overview {
			font-size: 1.1rem;
			line-height: 1.8;
			color: #e5e7eb;
			margin: 10px 0;
		}

		.genres {
			display: flex;
			gap: 10px;
			flex-wrap: wrap;

			.genre-tag {
				padding: 8px 18px;
				background: linear-gradient(135deg, #4563ea 0%, #4c4ba2 100%);
				border-radius: 20px;
				font-size: 0.9rem;
				font-weight: 600;
				box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
				@include smooth-transition;

				&:hover {
					transform: translateY(-3px);
					box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
				}
			}
		}
	}

	&-error {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		min-height: 100vh;
		background: linear-gradient(to bottom, #0a0e27 0%, #1a1f3a 100%);
		color: #fff;
		text-align: center;
		padding: 20px;

		.error-icon {
			font-size: 5rem;
			margin-bottom: 20px;
			opacity: 0.5;
		}

		h2 {
			font-size: 2.5rem;
			font-weight: 700;
			margin-bottom: 10px;
		}

		p {
			font-size: 1.2rem;
			color: #9ca3af;
		}
	}

	&-skeleton {
		background: #0a0e27;
		position: relative;

		.backdrop-skeleton {
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			height: 100%;
			background: #0a0e27;
			animation: pulse 1.5s ease-in-out infinite;
		}

		.container {
			position: relative;
			z-index: 1;
			display: flex;
			flex-wrap: wrap;
			gap: 40px;
			padding: 60px 20px;
			max-width: 1400px;
			margin: 0 auto;
		}

		.poster-skeleton {
			flex: 0 0 350px;
			height: 525px;
			border-radius: 16px;
		}

		.info-skeleton {
			flex: 1;
			min-width: 300px;
			display: flex;
			flex-direction: column;
			gap: 20px;

			.title-skeleton {
				height: 60px;
				width: 70%;
				border-radius: 8px;
			}

			.tagline-skeleton {
				height: 30px;
				width: 50%;
				border-radius: 8px;
			}

			.meta-skeleton {
				display: flex;
				gap: 16px;

				.skeleton {
					height: 40px;
					width: 100px;
					border-radius: 8px;
				}
			}

			.overview-skeleton {
				display: flex;
				flex-direction: column;
				gap: 10px;

				.skeleton {
					height: 20px;
					border-radius: 4px;

					&:nth-child(1) {
						width: 100%;
					}

					&:nth-child(2) {
						width: 95%;
					}

					&:nth-child(3) {
						width: 80%;
					}
				}
			}

			.genres-skeleton {
				display: flex;
				gap: 10px;

				.skeleton {
					height: 35px;
					width: 100px;
					border-radius: 20px;
				}
			}
		}

		.skeleton {
			@include skeleton-gradient;
		}
	}
}

@media (max-width: 1024px) {
	.movie-detail {
		.container {
			padding: 40px 20px;
		}

		.poster {
			flex: 0 0 280px;
		}

		.info {
			.title {
				font-size: 2.2rem;
			}

			.tagline {
				font-size: 1rem;
			}

			.directors .people-grid,
			.cast .people-grid {
				grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
			}
		}
	}
}

@media (max-width: 768px) {
	.movie-detail {
		.backdrop {
			height: 50vh;
		}

		.container {
			flex-direction: column;
			align-items: center;
			padding: 30px 15px;
			gap: 30px;
		}

		.poster {
			flex: 0 0 auto;
			width: 280px;

			img {
				width: 100%;
			}
		}

		.info {
			text-align: center;

			.title {
				font-size: 1.8rem;
			}

			.tagline {
				font-size: 0.95rem;
			}

			.meta {
				justify-content: center;
			}

			.genres {
				justify-content: center;
			}

			.directors .people-grid,
			.cast .people-grid {
				grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
				gap: 15px;
			}
		}

		&-skeleton {
			.container {
				flex-direction: column;
				align-items: center;
			}

			.poster-skeleton {
				flex: 0 0 auto;
				width: 280px;
				height: 420px;
			}

			.info-skeleton {
				.title-skeleton,
				.tagline-skeleton {
					margin: 0 auto;
				}

				.meta-skeleton,
				.genres-skeleton {
					justify-content: center;
				}
			}
		}
	}
}

@media (max-width: 480px) {
	.movie-detail {
		.poster {
			width: 240px;
		}

		.info {
			.title {
				font-size: 1.5rem;
			}

			.overview {
				font-size: 1rem;
			}

			.directors .people-grid,
			.cast .people-grid {
				grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
			}
		}
	}
}
