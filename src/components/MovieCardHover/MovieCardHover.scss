@use '../../styles/mixins' as *;

.movie-card {
	position: relative;
	border-radius: 4px;
	overflow: visible;
	cursor: pointer;
	@include smooth-transition(all, 0.3s cubic-bezier(0.5, 0, 0.1, 1));
	max-width: 100%;

	.card-preview {
		position: relative;
		width: 100%;
		aspect-ratio: 2/3;
		border-radius: 4px;
		overflow: hidden;
		background: #1a1a1a;

		img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			display: block;
		}
	}

	&.is-hovered {
		z-index: 999;

		.card-preview {
			opacity: 0;
		}

		&[data-origin='center'] {
			transform: scale(1.5) translateY(-20px) translateX(var(--offset-x, 0));
			transform-origin: center center;
		}

		&[data-origin='left'] {
			transform: scale(1.5) translateY(-20px) translateX(var(--offset-x, 20%));
			transform-origin: left center;
		}

		&[data-origin='right'] {
			transform: scale(1.5) translateY(-20px) translateX(var(--offset-x, -20%));
			transform-origin: right center;
		}
	}

	.card-expanded {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		background: #181818;
		border-radius: 6px;
		overflow: hidden;
		box-shadow: 0 4px 24px rgba(0, 0, 0, 0.5);
		animation: expandCard 0.3s cubic-bezier(0.5, 0, 0.1, 1);
		will-change: transform, opacity;
		contain: layout paint;

		.media {
			position: relative;
			width: 100%;
			aspect-ratio: 16/9;
			background: #000;
			overflow: hidden;

			img,
			iframe {
				width: 100%;
				height: 100%;
				object-fit: cover;
				display: block;
				border: none;
			}

			iframe {
				pointer-events: none;
			}
		}

		.info {
			padding: 10px 12px 12px;
			background: #181818;

			.actions {
				display: flex;
				align-items: center;
				gap: 6px;
				margin-bottom: 10px;

				a {
					display: flex;
				}

				button {
					@include button-reset;
					@include smooth-transition(all, 0.15s);
					display: flex;
					align-items: center;
					justify-content: center;
					background: rgba(42, 42, 42, 0.8);
					color: #fff;
					border: 2px solid rgba(255, 255, 255, 0.5);
					flex-shrink: 0;

					&:hover {
						background: rgba(255, 255, 255, 0.2);
						border-color: #fff;
						transform: scale(1.05);
					}

					&:active {
						transform: scale(0.95);
					}
				}

				.btn-play {
					width: 32px;
					height: 32px;
					border-radius: 50%;
					background: #fff;
					color: #000;
					border: none;

					&:hover {
						background: rgba(255, 255, 255, 0.85);
						transform: scale(1.05);
					}
				}

				.btn-icon {
					width: 32px;
					height: 32px;
					border-radius: 50%;
				}

				.ml-auto {
					margin-left: auto;
				}
			}

			.title {
				font-size: 14px;
				font-weight: 700;
				margin: 0 0 6px;
				color: #fff;
				line-height: 1.3;
				@include text-ellipsis(1);
			}

			.meta {
				display: flex;
				align-items: center;
				gap: 8px;
				margin-bottom: 6px;
				font-size: 12px;
				flex-wrap: wrap;

				.match {
					color: #46d369;
					font-weight: 700;
				}

				.year {
					color: rgba(255, 255, 255, 0.6);
				}

				.badge {
					padding: 0 4px;
					border: 1px solid rgba(255, 255, 255, 0.4);
					border-radius: 2px;
					font-size: 10px;
					color: rgba(255, 255, 255, 0.6);
					line-height: 1.4;
				}
			}

			.genres {
				font-size: 11px;
				color: rgba(255, 255, 255, 0.75);
				line-height: 1.4;
				@include text-ellipsis(2);
			}
		}
	}
}

@media (hover: none) and (pointer: coarse) {
	.movie-card {
		&.is-hovered {
			transform: none !important;
		}

		.card-expanded {
			display: none;
		}
	}
}
